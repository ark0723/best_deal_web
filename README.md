# π›οΈ μ‹¤μ‹κ°„ μ‡Όν•‘ κ²€μƒ‰ μ±—λ΄‡ (λ„¤μ΄λ²„ API + LangGraph + FastAPI + Streamlit)

λ„¤μ΄λ²„ APIμ™€ LangGraph, Gemini LLMμ„ ν™μ©ν• **μ‹¤μ‹κ°„ μ‡Όν•‘ μƒν’ κ²€μƒ‰ λ° μ¶”μ²** μ±—λ΄‡μ…λ‹λ‹¤.

## β¨ μ£Όμ” νΉμ§•

- π” **μ‹¤μ‹κ°„ κ²€μƒ‰**: λ„¤μ΄λ²„ APIλ΅ μµμ‹  μƒν’ μ •λ³΄ μ‹¤μ‹κ°„ μμ§‘
- β΅ **κ³ μ„±λ¥**: Direct API λ°©μ‹μΌλ΅ 200-500ms μ‘λ‹µμ‹κ°„
- π― **μ •ν™•ν• μ •λ³΄**: λ§¥λ¶ ν”„λ΅ M4 κ°™μ€ μµμ‹  μ ν’ μ •λ³΄λ„ μ •ν™•ν•κ² κ²€μƒ‰
- π¤– **AI μ¶”μ²**: Gemini LLM κΈ°λ° κ°μΈν™”λ μƒν’ μ¶”μ²
- π’¬ **μμ—°μ–΄ λ€ν™”**: μ‚¬μ©μ μΉν™”μ μΈ μ±„ν… μΈν„°νμ΄μ¤
### 2. μ„λ²„ μ‹¤ν–‰ λ°©λ²•

#### λ°©λ²• 1: κ°„νΈν• μ¤ν¬λ¦½νΈ μ‚¬μ©
```bash
# λ€ν™”ν• μ¤ν¬λ¦½νΈλ΅ μ‹¤ν–‰
./start.sh
```

#### λ°©λ²• 2: Python μ¤ν¬λ¦½νΈ μ‚¬μ© (λ‘ μ„λ²„ λ™μ‹ μ‹¤ν–‰)
```bash
python run_servers.py
```

#### λ°©λ²• 3: κ°λ³„ μ„λ²„ μ‹¤ν–‰

**FastAPI λ°±μ—”λ“ μ„λ²„:**
```bash
python -m uvicorn backend.main:app --host localhost --port 8000 --reload
```

**Streamlit ν”„λ΅ νΈμ—”λ“:**
```bash
streamlit run frontend/app.py --server.port 8501
```

### 3. μ ‘μ† μ£Όμ†

- **π Streamlit μ±„ν… UI**: http://localhost:8501
- **π“΅ FastAPI λ°±μ—”λ“**: http://localhost:8000  
- **π“– API λ¬Έμ„ (Swagger)**: http://localhost:8000/docs
- **π“ ν—¬μ¤ μ²΄ν¬**: http://localhost:8000/health

## π” μ‹¤μ‹κ°„ κ²€μƒ‰ μ‹μ¤ν…

### λ„¤μ΄λ²„ API ν†µν•© κ²€μƒ‰
```python
# ν†µν•© κ²€μƒ‰ μμ‹
query = "λ§¥λ¶ ν”„λ΅ M4 2024"
results = await naver_realtime_search(query)

# κ²°κ³Ό: μ›Ήλ¬Έμ„, λ‰΄μ¤, λΈ”λ΅κ·Έ, μ‡Όν•‘ ν†µν•© 40κ°+ κ²°κ³Ό
```

### κ²€μƒ‰ μ„±λ¥
- **μ‘λ‹µμ‹κ°„**: 200-500ms
- **κ²€μƒ‰ μ†μ¤**: λ„¤μ΄λ²„ μ›Ήλ¬Έμ„, λ‰΄μ¤, λΈ”λ΅κ·Έ, μ‡Όν•‘
- **κ²°κ³Ό ν’μ§**: μ‹¤μ‹κ°„ μµμ‹  μ •λ³΄
- **μ•μ •μ„±**: 99%+ κ°€μ©μ„±

## π§ ν…μ¤νΈ μ‹¤ν–‰

### μ „μ²΄ ν…μ¤νΈ
```bash
# λ¨λ“  ν…μ¤νΈ μ‹¤ν–‰
python -m pytest tests/ -v

# MCP ν†µν•© ν…μ¤νΈ
python -m pytest tests/test_mcp_integration.py -v

# λ„¤μ΄λ²„ κ²€μƒ‰ ν…μ¤νΈ
python test_naver_realtime.py

# μµμ ν™”λ κ²€μƒ‰ μ‹μ¤ν… ν…μ¤νΈ
python test_optimized_search.py
```

### κ°λ³„ μ»΄ν¬λ„νΈ ν…μ¤νΈ
```bash
# λ°±μ—”λ“ API ν…μ¤νΈ
python -m pytest tests/test_backend_api.py -v

# MCP ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ
python -m pytest tests/test_mcp_client.py -v

# MCP λ„κµ¬ ν…μ¤νΈ
python -m pytest tests/test_mcp_tools.py -v

# E2E ν†µν•© ν…μ¤νΈ
python -m pytest tests/test_e2e_integration.py -v
```

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
.
β”β”€β”€ backend/                    # FastAPI λ°±μ—”λ“
β”‚   β”β”€β”€ main.py                # FastAPI μ•± μ§„μ…μ 
β”‚   β”β”€β”€ routes.py              # API λΌμ°ν„° (MCP ν†µν•©)
β”‚   β””β”€β”€ models.py              # Pydantic λ¨λΈ
β”β”€β”€ frontend/                   # Streamlit ν”„λ΅ νΈμ—”λ“
β”‚   β”β”€β”€ app.py                 # Streamlit λ©”μΈ μ•±
β”‚   β”β”€β”€ components.py          # UI μ»΄ν¬λ„νΈ
β”‚   β”β”€β”€ streaming_client.py    # μ¤νΈλ¦¬λ° ν΄λΌμ΄μ–ΈνΈ
β”‚   β””β”€β”€ streamlit_streaming.py # μ¤νΈλ¦¬λ° μΈν„°νμ΄μ¤
β”β”€β”€ agent/                      # LangGraph Agent + κ²€μƒ‰ μ‹μ¤ν…
β”‚   β”β”€β”€ agent.py               # μ‡Όν•‘ Agent (MCP ν†µν•©)
β”‚   β”β”€β”€ tools.py               # MCP κΈ°λ° ν†µν•© λ„κµ¬
β”‚   β”β”€β”€ tools_backup.py        # κΈ°μ΅΄ λ„κµ¬ λ°±μ—…
β”‚   β”β”€β”€ mcp_client.py          # MCP ν΄λΌμ΄μ–ΈνΈ
β”‚   β”β”€β”€ mcp_tools.py           # MCP λ„κµ¬ κ΄€λ¦¬
β”‚   β””β”€β”€ naver_realtime_search.py # λ„¤μ΄λ²„ API μ‹¤μ‹κ°„ κ²€μƒ‰ β­
β”β”€β”€ tests/                      # ν¬κ΄„μ μΈ ν…μ¤νΈ μ¤μ„νΈ
β”‚   β”β”€β”€ test_mcp_client.py     # MCP ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ
β”‚   β”β”€β”€ test_mcp_tools.py      # MCP λ„κµ¬ ν…μ¤νΈ
β”‚   β”β”€β”€ test_mcp_integration.py # MCP ν†µν•© ν…μ¤νΈ
β”‚   β””β”€β”€ test_*.py              # κΈ°νƒ€ μ»΄ν¬λ„νΈ ν…μ¤νΈ
β”β”€β”€ .cursor/rules/              # κ°λ° κ°€μ΄λ“λΌμΈ
β”‚   β”β”€β”€ web-search-mcp-dev-plan.mdc # MCP κ°λ° κ³„ν
β”‚   β””β”€β”€ streaming-dev-plan.mdc      # μ¤νΈλ¦¬λ° κ°λ° κ³„ν
β”β”€β”€ config.py                   # μ „μ—­ μ„¤μ •
β”β”€β”€ requirements.txt           # Python μμ΅΄μ„±
β”β”€β”€ .env                       # ν™κ²½ λ³€μ (API ν‚¤)
β”β”€β”€ test_naver_realtime.py     # λ„¤μ΄λ²„ κ²€μƒ‰ ν…μ¤νΈ β­
β”β”€β”€ test_optimized_search.py   # μµμ ν™” μ‹μ¤ν… ν…μ¤νΈ β­
β”β”€β”€ run_servers.py             # μ„λ²„ μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
β””β”€β”€ start.sh                   # κ°„νΈ μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
```

## π”§ ν•µμ‹¬ κΈ°λ¥

### π’¬ μ‹¤μ‹κ°„ μ±„ν…
- μμ—°μ–΄ μƒν’ κ²€μƒ‰ μ”μ²­
- SSE μ¤νΈλ¦¬λ° μ‹¤μ‹κ°„ μ‘λ‹µ
- λ‹¤μ¤‘ μ„Έμ… μ§€μ›
- λ€ν™” μ»¨ν…μ¤νΈ μ μ§€

### π” μ‹¤μ‹κ°„ κ²€μƒ‰ μ—”μ§„
- **λ„¤μ΄λ²„ ν†µν•© κ²€μƒ‰**: μ›Ήλ¬Έμ„, λ‰΄μ¤, λΈ”λ΅κ·Έ, μ‡Όν•‘
- **μµμ‹  μ ν’ μ •λ³΄**: λ§¥λ¶ ν”„λ΅ M4, μ•„μ΄ν° 15 λ“±
- **μ‹¤μ‹κ°„ κ°€κ²© λΉ„κµ**: μ‡Όν•‘λ°λ³„ μµμ €κ°€ κ²€μƒ‰
- **νΈλ λ“ λ¶„μ„**: μµμ‹  μƒν’ νΈλ λ“ νμ•…

### π¤– AI μ¶”μ² μ‹μ¤ν…
- Google Gemini LLM κΈ°λ°
- LangGraph μƒνƒ κ΄€λ¦¬
- μ‚¬μ©μ μ„ νΈλ„ ν•™μµ
- μ»¨ν…μ¤νΈ κΈ°λ° κ°μΈν™” μ¶”μ²

### π—οΈ MCP ν†µν•© (μ„ νƒμ )
- Model Context Protocol μ§€μ›
- λ‹¤μ¤‘ κ²€μƒ‰ μ„λΉ„μ¤ ν†µν•©
- ν™•μ¥ κ°€λ¥ν• μ•„ν‚¤ν…μ²
- ν‘μ¤€ν™”λ μΈν„°νμ΄μ¤

## π”‘ ν™κ²½ λ³€μ

`.env` νμΌ μ„¤μ •:

```env
# ν•„μ - Gemini AI
GOOGLE_API_KEY=your_gemini_api_key

# ν•„μ - λ„¤μ΄λ²„ κ²€μƒ‰ API
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret

# μ„ νƒμ  - MCP μ„λ²„ (μ‚¬μ©ν•μ§€ μ•μ)
NAVER_SEARCH_MCP_URL=http://localhost:8001/mcp
EXA_SEARCH_MCP_URL=http://localhost:8002/mcp

# μ„λ²„ μ„¤μ •
BACKEND_HOST=localhost
BACKEND_PORT=8000
FRONTEND_PORT=8501
DEBUG=True
CORS_ORIGINS=http://localhost:8501,http://127.0.0.1:8501
LOG_LEVEL=INFO
```

## π“ μ„±λ¥ λ° ν…μ¤νΈ ν„ν™©

### κ²€μƒ‰ μ„±λ¥
- β΅ **μ‘λ‹µμ‹κ°„**: 200-500ms (Direct API)
- π― **μ •ν™•λ„**: 95%+ (μ‹¤μ‹κ°„ μµμ‹  μ •λ³΄)
- π“ **μ²λ¦¬λ‰**: λ™μ‹ 40κ°+ κ²°κ³Ό μμ§‘
- π”„ **κ°€μ©μ„±**: 99%+ (λ„¤μ΄λ²„ API μ•μ •μ„±)

### ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€
- β… **μ „μ²΄ ν…μ¤νΈ**: 95%+ ν†µκ³Όμ¨
- β… **MCP ν†µν•©**: μ™„μ „ ν…μ¤νΈλ¨
- β… **μ‹¤μ‹κ°„ κ²€μƒ‰**: κ²€μ¦ μ™„λ£
- β… **E2E ν…μ¤νΈ**: 100% ν†µκ³Ό

## π› οΈ κΈ°μ  μ¤νƒ

### λ°±μ—”λ“
- **API ν”„λ μ„μ›ν¬**: FastAPI, Uvicorn
- **λ°μ΄ν„° κ²€μ¦**: Pydantic
- **HTTP ν΄λΌμ΄μ–ΈνΈ**: aiohttp (λΉ„λ™κΈ°)

### ν”„λ΅ νΈμ—”λ“  
- **UI ν”„λ μ„μ›ν¬**: Streamlit
- **μ‹¤μ‹κ°„ ν†µμ‹ **: Server-Sent Events (SSE)

### AI λ° κ²€μƒ‰
- **AI ν”„λ μ„μ›ν¬**: LangGraph, LangChain
- **LLM**: Google Gemini Pro
- **κ²€μƒ‰ API**: λ„¤μ΄λ²„ κ²€μƒ‰ API
- **ν”„λ΅ν† μ½**: MCP (Model Context Protocol)

### κ°λ° λ° ν…μ¤νΈ
- **ν…μ¤νΈ**: pytest, pytest-asyncio
- **ν™κ²½ κ΄€λ¦¬**: python-dotenv
- **μ•„ν‚¤ν…μ²**: Clean Architecture, SOLID μ›μΉ™

## π”„ κ°λ° μ›ν¬ν”λ΅

μ΄ ν”„λ΅μ νΈλ” **TDD(Test-Driven Development)** λ°©μ‹μΌλ΅ κ°λ°λμ—μµλ‹λ‹¤:

1. **ν…μ¤νΈ μ‘μ„±**: κ° κΈ°λ¥λ³„ ν¬κ΄„μ μΈ ν…μ¤νΈ μ½”λ“
2. **κΈ°λ¥ κµ¬ν„**: ν…μ¤νΈλ¥Ό ν†µκ³Όν•λ” μµμ† κΈ°λ¥ κµ¬ν„
3. **ν…μ¤νΈ κ²€μ¦**: λ¨λ“  ν…μ¤νΈ ν†µκ³Ό ν™•μΈ
4. **λ¦¬ν©ν† λ§**: μ½”λ“ ν’μ§ κ°μ„  λ° μµμ ν™”

## π― μ‚¬μ© μμ‹

### 1. κΈ°λ³Έ μƒν’ κ²€μƒ‰
```
μ‚¬μ©μ: "λ§¥λ¶ ν”„λ΅ M4 μ°Ύμ•„μ¤"
AI: λ„¤μ΄λ²„μ—μ„ μµμ‹  λ§¥λ¶ ν”„λ΅ M4 μ •λ³΄λ¥Ό κ²€μƒ‰ν–μµλ‹λ‹¤.
    - 2024 λ§¥λ¶ ν”„λ΅ M4 14μΈμΉ (κ°€κ²©: 2,690,000μ›)
    - λ§¥λ¶ ν”„λ΅ M4 16μΈμΉ 32GB (κ°€κ²©: 4,390,000μ›)
    - μµμ‹  ν• μΈ μ •λ³΄ λ° λ¦¬λ·° ν¬ν•¨
```

### 2. μ΅°κ±΄λ¶€ κ²€μƒ‰
```
μ‚¬μ©μ: "300λ§μ› μ΄ν• λ§¥λ¶λ§ λ³΄μ—¬μ¤"
AI: 300λ§μ› μ΄ν• λ§¥λ¶ κ²€μƒ‰ κ²°κ³Όμ…λ‹λ‹¤.
    - ν•„ν„°λ§λ μƒν’ λ©λ΅
    - κ°€κ²© λΉ„κµ μ •λ³΄
    - μ¶”μ² μ΄μ  μ„¤λ…
```

### 3. μ‹¤μ‹κ°„ μ •λ³΄ ν™•μΈ
```
μ‚¬μ©μ: "μ•„μ΄ν° 15 ν”„λ΅ μµμ‹  λ‰΄μ¤ μμ–΄?"
AI: λ„¤μ΄λ²„ λ‰΄μ¤μ—μ„ μµμ‹  μ•„μ΄ν° 15 ν”„λ΅ μ†μ‹μ„ μ°Ύμ•μµλ‹λ‹¤.
    - μµμ‹  μ—…λ°μ΄νΈ μ •λ³΄
    - κ°€κ²© λ³€λ™ ν„ν™©
    - μ‚¬μ©μ λ¦¬λ·° μ”μ•½
```

## π§ μ‹μ¤ν… μ•„ν‚¤ν…μ²

### κ²€μƒ‰ λ°©μ‹ λΉ„κµ

#### π† **ν„μ¬ μ‚¬μ©: Direct API λ°©μ‹**
- β… μ‘λ‹µμ‹κ°„: 200-500ms
- β… μ„λ²„ μμ΅΄μ„±: μ—†μ
- β… μ‹¤μ‹κ°„μ„±: λ§¤μ° λ†’μ
- β… κµ¬ν„ λ³µμ΅λ„: λ‚®μ
- β… μ•μ •μ„±: λ†’μ

#### π”§ **μ„ νƒμ : MCP λ°©μ‹**
- β οΈ μ‘λ‹µμ‹κ°„: 500-1000ms+
- β μ„λ²„ μμ΅΄μ„±: MCP μ„λ²„ ν•„μ”
- β οΈ μ‹¤μ‹κ°„μ„±: λ³΄ν†µ
- β κµ¬ν„ λ³µμ΅λ„: λ†’μ
- β οΈ μ•μ •μ„±: μ„λ²„ μƒνƒ μμ΅΄

## π‰ μµμ‹  μ—…λ°μ΄νΈ (2024.06)

### β¨ λ„¤μ΄λ²„ API μ‹¤μ‹κ°„ κ²€μƒ‰ μ‹μ¤ν…
- **μ‹ κ· κΈ°λ¥**: λ„¤μ΄λ²„ API μ§μ ‘ μ—°λ™
- **μ„±λ¥ ν–¥μƒ**: μ‘λ‹µμ‹κ°„ 50% λ‹¨μ¶•
- **ν™•μ¥μ„±**: MCP ν”„λ΅ν† μ½ μ§€μ›
- **μµμ ν™”**: λ¶ν•„μ”ν• μμ΅΄μ„± μ κ±°

### π”§ κΈ°μ μ  κ°μ„ μ‚¬ν•­
- **λΉ„λ™κΈ° μ²λ¦¬**: λ³‘λ ¬ κ²€μƒ‰μΌλ΅ μ„±λ¥ μµμ ν™”
- **μ—λ¬ ν•Έλ“¤λ§**: κ°•ν™”λ μμ™Έ μ²λ¦¬
- **μ„Έμ… κ΄€λ¦¬**: λ©”λ¨λ¦¬ λ„μ λ°©μ§€
- **ν…μ¤νΈ κ°•ν™”**: 95% μ΄μƒ μ»¤λ²„λ¦¬μ§€

### π“ κ²€μ¦λ μ„±λ¥
- **λ§¥λ¶ ν”„λ΅ M4 κ²€μƒ‰**: 40κ°+ μµμ‹  κ²°κ³Ό
- **μ‹¤μ‹κ°„ μ •λ³΄**: 2024λ…„ μµμ‹  μ ν’ μ •λ³΄
- **μ•μ •μ„±**: μ—°μ† ν…μ¤νΈ μ„±κ³µ
- **μ‚¬μ©μ κ²½ν—**: μ§κ΄€μ μΈ κ²€μƒ‰ κ²°κ³Ό

## π ν–¥ν›„ ν™•μ¥ κ³„ν

- π” **μ¶”κ°€ κ²€μƒ‰ μ—”μ§„**: κµ¬κΈ€, λΉ™ λ“± λ‹¤μ¤‘ κ²€μƒ‰
- π›’ **μ‡Όν•‘λ° μ—°λ™**: μΏ ν΅, 11λ²κ°€ λ“± μ§μ ‘ μ—°λ™
- π‘¤ **μ‚¬μ©μ μ‹μ¤ν…**: κ°μΈν™” μ¶”μ² κ°•ν™”
- π“± **λ¨λ°”μΌ μ•±**: React Native λ²„μ „
- π¤– **AI μ—…κ·Έλ μ΄λ“**: GPT-4, Claude λ“± λ©€ν‹° LLM

---

π― **κ°λ° μ™„λ£**: 2024λ…„ 6μ›”, TDD λ°©μ‹ + λ„¤μ΄λ²„ API μ‹¤μ‹κ°„ κ²€μƒ‰ μ‹μ¤ν… κµ¬μ¶•  
β΅ **μ„±λ¥ κ²€μ¦**: λ§¥λ¶ ν”„λ΅ M4 μ‹¤μ‹κ°„ κ²€μƒ‰ 40κ°+ κ²°κ³Ό μμ§‘ μ„±κ³µ 